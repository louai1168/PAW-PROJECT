<!doctype html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
  body {
  font-family: Arial, sans-serif;
  padding: 20px;
  background-color: #f9f9f9;
}

h2 {
  text-align: center;
}

table {
  border-collapse: collapse;
  width: 100%;
  text-align: center;
  margin-bottom: 20px;
}

th, td {
  border: 1px solid #333;
  padding: 8px;
}

th {
  background-color: #e6e6e6;
}

.b {
  display: block;
  margin: 0 auto;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
  border: none;
  background-color: #0078d7;
  color: white;
  border-radius: 5px;
}

.b:hover {
  background-color: #005fa3;
}


.green {
  background-color: green;
}
.yellow {
  background-color: yellow;
}
.red {
  background-color: red;
}
.excellent {
  background-color: #a2ffbc !important;
  transition: background-color 0.8s;
}

.a {
  display: flex;
  margin: 10px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
  border: none;
  background-color: #0078d7;
  color: white;
  border-radius: 5px;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.a:hover {
  background-color: #005fa3;
}

</style>
</head>
<body>
  <h2>exo6 </h2>

  <table id="attendance">
    <thead>
      <tr>
        <th>Student ID</th>
        <th>Last Name</th>
        <th>First Name</th>
        <th>Course</th>
        <th colspan="6">Sessions</th>
        <th colspan="6">Participation</th>
        <th>Message</th>
      </tr>
      <tr>
        <th colspan="4"></th>
        <th>S1</th><th>S2</th><th>S3</th><th>S4</th><th>S5</th><th>S6</th>
        <th>P1</th><th>P2</th><th>P3</th><th>P4</th><th>P5</th><th>P6</th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>202523</td><td>Bahidj</td><td>Louai</td><td>PAW</td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td></td>
      </tr>

      <tr>
        <td>202524</td><td>Ramzi</td><td>Ali</td><td>PAW</td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td></td>
      </tr>

      <tr>
        <td>202525</td><td>Remdani</td><td>Yacine</td><td>PAW</td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td><input type="checkbox"></td><td><input type="checkbox"></td><td><input type="checkbox"></td>
        <td></td>
      </tr>
    </tbody>
  </table>

  <button class="b" onclick="analyze()">Analyze Attendance</button>
  <button class="a" id="highlightExcellentBtn">Highlight Excellent Students</button>
<button class="a" id="resetColorsBtn">Reset Colors</button>

  <script >
      function analyze() {
  const rows = document.querySelectorAll("#attendance tbody tr");

  rows.forEach(row => {
    const inputs = row.querySelectorAll("input[type='checkbox']");
    const sessions = Array.from(inputs).slice(0, 6);
    const participations = Array.from(inputs).slice(6, 12);

    const absences = sessions.length - sessions.filter(c => c.checked).length;
    const parts = participations.filter(c => c.checked).length;

    let message = "";
    row.classList.remove("green", "yellow", "red");

    if (absences < 3) {
      row.classList.add("green");
      message = "Good attendance  Excellent participation";
    } else if (absences >= 3 && absences <= 4) {
      row.classList.add("yellow");
      message = "Warning  attendance low  You need to participate more";
    } else {
      row.classList.add("red");
      message = "Excluded  too many absences  You need to participate more";
    }

    row.lastElementChild.textContent = `${absences} Abs /  ${message}`;
  });
  
}

$(document).ready(function() {
  $("#highlightExcellentBtn").click(function() {
    $("#attendance tbody tr").each(function() {
      const sessionCbs = $(this).find('input[type="checkbox"]').slice(0, 6);
      const absences = sessionCbs.length - sessionCbs.filter(':checked').length;

      if (absences < 3) {
        
        $(this).fadeOut(200, function() {
          $(this).addClass("excellent").fadeIn(400);
        });
      }
    });
  });

  $("#resetColorsBtn").click(function() {
    
    $("#resetColorsBtn").click(function() {
  $("#attendance tbody tr")
    .removeClass("excellent green yellow red")
    .each(function() {
      $(this).find("td:last").text("");
    });
});

  });
});
  </script>
</body>
</html>
